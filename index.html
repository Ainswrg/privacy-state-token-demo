<!DOCTYPE html>

<!--
 Copyright 2023 Google LLC

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      https://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 -->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ›‚</text></svg>">
  <script defer src="./redeemer.js"></script>
  <title>Private State Token Redeemer DEMO</title>
  <style>
    body {
        font-family: "Google Sans", Segoe UI, system-ui, -apple-system, sans-serif;
        font-size: 0.8em;
        margin: 50px;
    }

    main {
    color: #333;
    margin: 0 auto 80px auto;
    max-width: 500px;
    }

    footer {
    border-top: 1px solid #ccc;
    font-size: 1rem;
    margin: 0 auto;
    padding: 10px 0 0 0;
    text-align: center;
    width: 50vw;
    }

    p {
    font-family: "Google Sans", sans-serif;
    font-weight: 200;
    line-height: 1.5em;
    }

    h1 {
    border-bottom: 1px solid #ccc;
    font-weight: 400;
    font-size: 2rem;
    margin: 0 0 80px 0;
    padding: 0 0 10px 0;
    text-align: center;
    }

    strong {
    color: red;
    }

    em {
    font-weight: bold;
    font-style: normal;
    }

    details {
    cursor: pointer;
    font-size: 1rem;
    }

    details[open] {
    height: 16em;
    }

    details[open] summary {
    display: none;
    }

    dialog {
    top: 10vh;
    max-width: 80vw;
    max-height: 80vh;

    border-radius: 1rem;
    border: solid 1px #ccc;
    box-shadow: 0 0 4px black;
    }

    dialog section {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    }

    dialog::backdrop {
    background: rgba(200, 200, 200, 0.8);
    }

    dialog h2 {
    color: red;
    margin-block-top: 1rem;
    margin-block-bottom: 1rem;
    }

    dialog ol {
    margin: 0;
    padding: 0 0 0 1.4rem;
    }

    dialog ol li {
    font-size: 1rem;
    line-height: 1.8rem;
    display: none;
    }

    #finish {
    color: blue;
    font-weight: bold;
    }

    dialog a:visited {
    color: #3740ff;
    }

    details {
    height: 1em;
    padding: 1em;
    background: #eee;
    border-radius: 4px;
    transition: 0.5s;
    }

  </style>
</head>
<body>
  <main>
    <h1>Private State Token Redeemer DEMO</h1>
    <details>
      <summary>Click me to continue</summary>
      <p><b>ðŸŽ‰ðŸŽ‰ Congratulations!</b></p>
      <p>We found that your browser saved valid Private State Tokens issued by <a href="https://trusttoken.dev">private-state-token-issuer.glitch.me</a>.</p>
      <p>This shows that you are a real human not a bot.</p>
      <p>If you wanna try issuing a Private State Token again, you need to clear the issued token saved in your browser. Go to the <a href="https://trusttoken.dev">Issuer demo</a> and click the <b>Clear token</b> button at the bottom of the page.</p>
    </details>
    <dialog>
      <section>
        <h2>Are you really a human?</h2>
        <ol>
          <li id="checking">Checking if you are a human or a bot...</li>
          <li id="hasTrustToken">Checking you have a Private State Token...</li>
          <li id="go2issuer">Go to <a href="https://trusttoken.dev">Private State Token Issuer</a> to get a token!</li>
          <li id="found">Private State Token found!!</li>
          <li id="redemption">Request redemption to issuer...</li>
          <li id="cached">Already cached.</li>
          <li id="verify">Verifying your Private State Token now...</li>
          <li id="finish">We found that you really are a human!!</li>
          <li id="failed">Failed to redeem token.</li>
        </ol>
      </section>
    </dialog>
  </main>
  <footer>

  </footer>
</body>
</html>
